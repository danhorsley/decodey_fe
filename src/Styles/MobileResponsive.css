/* 
   MobileResponsive.css - Consolidated responsive design system
   This file contains all mobile-specific media queries and responsive styles
   Ensures consistent breakpoints and styling across all mobile experiences

   UPDATED: Added explicit orientation checks to media queries
*/

/* ===== BREAKPOINT SYSTEM ===== */
/* 
   Standardized breakpoints with orientation awareness:

   PORTRAIT MODE:
   - xs-portrait: 0-374px width (Small phones like iPhone SE in portrait)
   - sm-portrait: 375-479px width (Typical modern small phones in portrait)
   - md-portrait: 480-767px width (Large phones like iPhone Pro Max in portrait)

   LANDSCAPE MODE:
   - xs-landscape: 0-667px width (Small phones like iPhone SE in landscape)
   - sm-landscape: 668-844px width (Modern phones in landscape)
   - md-landscape: 845-1024px width (Large phones & small tablets in landscape)

   SHARED:
   - lg: 768-991px (Tablets in portrait, phones in landscape)
   - xl: 992px+ (Tablets in landscape and desktops)
*/

/* ===== BASE MOBILE SETTINGS ===== */
.mobile-mode {
  font-size: 12px;
  /* Base font size for mobile */
  --grid-gap: 0.5rem;
  --button-min-height: 44px;
  /* Touch-friendly button height */
  --letter-cell-size: 40px;
  /* Default letter cell size */
}

/* ===== PORTRAIT MODE STYLES ===== */
@media (orientation: portrait) {
  .mobile-mode {
    /* Portrait-specific base values */
    --text-container-max-height: 35vh;
    --controls-padding: 0.5rem;
  }

  /* Ensure game dashboard is stacked vertically in portrait */
  .mobile-mode .game-dashboard {
    grid-template-areas:
      "encrypted"
      "controls"
      "guess";
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 0.5rem;
  }

  /* Optimize text container for portrait */
  .mobile-mode .text-container {
    max-height: var(--text-container-max-height);
    padding: 0.5rem;
    margin-bottom: 0.5rem;
  }

  /* Win celebration adjustments for portrait */
  .mobile-mode .celebration-content {
    width: 90%;
    max-height: 85vh;
    overflow-y: auto;
    padding: 1rem;
  }
}


/* ===== LANDSCAPE MODE STYLES ===== */
@media (orientation: landscape) {
  .mobile-mode {
    /* Landscape-specific base values */
    --text-container-max-height: 25vh;
    --controls-padding: 0.25rem;
  }

  /* Use horizontal layout for game dashboard in landscape */
  .mobile-mode .game-dashboard {
    grid-template-areas: "encrypted controls guess";
    grid-template-columns: 5fr 1fr 5fr;
    gap: 0.75rem;
    margin-left: 0;
    /* Reset margin to avoid extra space */
    padding-left: 0;
    /* Remove left padding */
  }

  /* Shift encrypted grid to the left */
  .mobile-mode .encrypted-grid {
    justify-self: start;
    /* Align to left edge */
    margin-left: 0;
    /* Remove margin for maximum left shift */
  }

  /* Shift guess grid to the left too */
  /* .mobile-mode .guess-grid {
    justify-self: start; 
    margin-left: 0; 
  } */

  /* Center the hint button as that should stay in the middle */
  .mobile-mode .controls-stack {
    justify-self: center;
  }

  /* Optimize text container for landscape */
  .mobile-mode .text-container {
    max-height: var(--text-container-max-height);
    padding: 0.25rem;
    margin-bottom: 0.25rem;
  }

  /* Optimize win celebration for landscape */
  .mobile-mode .celebration-content {
    width: 85%;
    max-width: 800px;
    max-height: 80vh;
    overflow-y: auto;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
  }

  /* More horizontal stats layout for landscape */
  .mobile-mode .stats-container {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
  }
}

/* ===== PORTRAIT SIZE BREAKPOINTS ===== */

/* EXTRA SMALL DEVICES IN PORTRAIT (under 375px width) */
@media (orientation: portrait) and (max-width: 374px) {
  .mobile-mode {
    font-size: 14px;
    --grid-gap: 0.25rem;
    --letter-cell-size: 32px;
  }

  /* Smaller text for very small screens */
  .mobile-mode .text-container {
    font-size: 0.85rem;
  }

  /* Tighter letter cells to fit more on screen */
  .mobile-mode .letter-cell {
    min-width: 30px;
    min-height: 30px;
    font-size: 0.8rem;
    margin: 1px;
  }

  /* Smaller frequency indicators */
  .mobile-mode .frequency-indicator {
    font-size: 0.45rem;
    bottom: 1px;
    right: 1px;
  }

  /* Ensure hint button is still usable */
  .mobile-mode .crossword-hint-button {
    min-width: 80px;
    min-height: 50px;
    padding: 0.5rem 0.4rem;
  }

  /* Smaller victory title */
  .mobile-mode .victory-title {
    font-size: 1.8rem;
  }
}

/* SMALL DEVICES IN PORTRAIT (375px - 479px width) */
@media (orientation: portrait) and (min-width: 375px) and (max-width: 479px) {
  .mobile-mode {
    font-size: 15px;
    --grid-gap: 0.35rem;
    --letter-cell-size: 36px;
  }

  /* Adjust letter cells */
  .mobile-mode .letter-cell {
    min-width: 34px;
    min-height: 34px;
    font-size: 0.9rem;
    margin: 2px;
  }

  /* Text container adjustments */
  .mobile-mode .text-container {
    font-size: 0.9rem;
  }

  /* Frequency indicator positioning */
  .mobile-mode .frequency-indicator {
    font-size: 0.5rem;
  }

  /* Victory title size */
  .mobile-mode .victory-title {
    font-size: 2rem;
  }
}

/* MEDIUM DEVICES IN PORTRAIT (480px - 767px width) */
@media (orientation: portrait) and (min-width: 480px) and (max-width: 767px) {
  .mobile-mode {
    font-size: 16px;
    --grid-gap: 0.4rem;
    --letter-cell-size: 42px;
  }

  /* Larger devices get larger buttons */
  .mobile-mode button:not(.letter-cell) {
    min-height: 48px;
    font-size: 1rem;
  }

  /* Larger letter cells for better touch targets */
  .mobile-mode .letter-cell {
    min-width: 42px;
    min-height: 42px;
    font-size: 1.1rem;
    margin: 3px;
  }

  /* Larger text area */
  .mobile-mode .text-container {
    font-size: 1rem;
    padding: 0.75rem;
  }

  /* Better hint button sizing */
  .mobile-mode .crossword-hint-button {
    min-width: 110px;
    min-height: 65px;
    padding: 0.75rem 0.5rem;
  }
}

/* ===== LANDSCAPE SIZE BREAKPOINTS ===== */

/* SMALL PHONES IN LANDSCAPE (up to 667px width) */
@media (orientation: landscape) and (max-width: 667px) {
  .mobile-mode {
    /* font-size: 14px; */
    --grid-gap: 0.2rem;
    --letter-cell-size: 28px;
  }

  /* Very compact letter cells for small landscape screens */
  .mobile-mode .landscape-mode .letter-cell {
    min-width: 30px;
    min-height: 30px;
    max-width: 35px;
    max-height: 35px;
    font-size: 0.85rem;
    margin: 1px;
  }


  /* More compact text display */
  .mobile-mode .text-container {
    font-size: 0.85rem;
    max-height: 20vh;
    padding: 0.25rem;
  }

  /* Smaller hint button */
  .mobile-mode .crossword-hint-button {
    min-width: 70px;
    min-height: 45px;
    padding: 0.25rem;
  }

  /* Tighter game dashboard */
  .mobile-mode .game-dashboard {
    gap: 0.25rem;
    padding: 0.25rem;
  }
}

/* MEDIUM PHONES IN LANDSCAPE (668px - 844px width) */
@media (orientation: landscape) and (min-width: 668px) and (max-width: 855px) {
  .mobile-mode {
    font-size: 15px;
    --grid-gap: 0.3rem;
    --letter-cell-size: 32px;
  }

  .mobile-mode .landscape-mode .encrypted-grid,
  .mobile-mode .landscape-mode .guess-grid {
    gap: 1px;
    grid-template-columns: repeat(5, 1fr);
    width: 49%;
  }

  .mobile-mode .landscape-mode .guess-grid {
    margin-right: 4rem;
  }

  /* Standard letter cells for medium landscape screens */
  .mobile-mode .landscape-mode .letter-cell {
    min-width: 45px;
    min-height: 45px;
    font-size: 1.75rem;
    margin: 2.5px;
  }

  .mobile-mode .char-grid {
    font-size: 1.05rem;
  }

  /* Adjusted text container */
  .mobile-mode .text-container {
    font-size: 0.9rem;
    max-height: 22vh;
  }

  /* Medium sized hint button */
  .mobile-mode .crossword-hint-button {
    min-width: 80px;
    min-height: 55px;
  }
}

/* LARGE PHONES & SMALL TABLETS IN LANDSCAPE (845px - 1024px width) */
@media (orientation: landscape) and (min-width: 845px) and (max-width: 1024px) {
  .mobile-mode {
    font-size: 16px;
    --grid-gap: 0.5rem;
    --letter-cell-size: 38px;
  }

  /* Larger letter cells for big landscape screens */
  .mobile-mode .letter-cell {
    min-width: 38px;
    min-height: 38px;
    font-size: 1.55rem;
    margin: 1px;
  }

  /* Larger text container */
  .mobile-mode .text-container {
    font-size: 1rem;
    max-height: 25vh;
  }

  /* Larger hint button */
  .mobile-mode .crossword-hint-button {
    min-width: 90px;
    min-height: 60px;
  }

  /* More spread out game dashboard */
  .mobile-mode .game-dashboard {
    gap: 0.75rem;
    padding: 0.5rem;
  }
}

/* ===== FONT MODIFICATION FOR LEGIBILITY ===== */
/* Special styling for E and F to make them more distinguishable */
.mobile-mode .letter-cell[data-letter="E"] {
  font-weight: 900;
  /* Extra bold */
  text-shadow: 0 0 1px currentColor;
  /* Slight shadow to enhance visibility */
}

.mobile-mode .letter-cell[data-letter="F"] {
  font-weight: 700;
  /* Bold but less than E */
}

/* ===== TEXT OVERFLOW HANDLING ===== */
/* Better text wrapping and overflow handling */
.mobile-mode .char-grid {
  flex-wrap: wrap;
  overflow-wrap: break-word;
  word-break: break-all;
  max-width: 100%;
  display: flex;
  justify-content: center;
}

.mobile-mode .grid-cell {
  flex: 0 0 auto;
}

/* Ensure long text can scroll properly */
.mobile-mode .text-container {
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* ===== MODAL STYLING ===== */
/* Ensure buttons are tap-friendly across all screens */
.mobile-mode button,
.mobile-mode .letter-cell,
.mobile-mode .settings-option,
.mobile-mode .tab {
  min-height: var(--button-min-height);
  touch-action: manipulation;
}

/* Improve modal scrolling behavior */
.mobile-mode .about-container,
.mobile-mode .settings-container,
.mobile-mode .login-container {
  max-height: 85vh;
  width: 92vw;
  margin: 0 auto;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

@media (orientation: landscape) and (max-width: 660px) and (max-height: 325px) {
  .mobile-mode .victory-message {
    margin-bottom: 1px;
  }

  .mobile-mode anon-score-message {
    font-size: 10px;
    --char-font-size: 0.75rem;
  }

  .mobile-mode .login-button {
    height: 20px;
    max-height: 20vh;
    font-size: 10px;
    padding: 1px;
    margin-top: 1px;
    border-radius: 20px;
    --button-min-height: 20px;
  }

  .mobile-mode .login-prompt {
    margin: 1px;
  }

  .mobile-mode .char-grid {
    font-size: 1.05rem;
  }

  .mobile-mode .victory-title {
    margin: 1px;
  }

}