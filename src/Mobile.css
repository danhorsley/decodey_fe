/*
  Mobile.css - Streamlined styles for mobile devices
  1. CORE LAYOUT - Containers and structure
  2. TYPOGRAPHY - Text and font styles
  3. GRIDS - Character and letter grids
  4. CONTROLS - Buttons and game controls
  5. THEMES - Light and dark theme variations
  6. RESPONSIVE - Media query adjustments
*/

/* ===== CORE LAYOUT ===== */
.mobile-mode {
  margin: 0;
  padding: 10px;
  max-width: 100%;
  height: 100vh;
  box-sizing: border-box;
  background: #fff;
}

.mobile-mode .game-content {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 20px);
  gap: 2px;
  overflow: hidden;
  /* Prevent content from spilling out */
}

.mobile-mode .text-container {
  margin: 3px auto;
  padding: 6px 12px;
  border-radius: 8px;
  max-height: 35vh;
  /* Limit height to keep grids below */
  overflow-y: auto;
  /* Scroll if text exceeds max-height */
  overflow-x: hidden;
  width: 100%;
  background: rgba(255, 255, 255, 0.95);
  flex-shrink: 0;
  /* Prevent shrinking below content */
}

/* ===== TYPOGRAPHY ===== */
.mobile-mode {
  font-family: 'Courier New', Courier, monospace;
  font-size: 0.9rem;
  line-height: 1.4;
}

.mobile-mode .retro-title {
  font-size: 1.5rem;
  font-weight: bold;
  color: #000;
  margin-bottom: 0;
}

.mobile-mode .alternating-text {
  white-space: pre-wrap;
  padding: 0 5px;
  text-align: left;
}

.mobile-mode .encrypted-line,
.mobile-mode .display-line {
  white-space: pre-wrap;
  line-height: 1.5;
  padding: 4px 2px;
  text-align: left;
}

.mobile-mode .encrypted-line {
  font-weight: 600;
}

.mobile-mode .display-line {
  font-weight: bold;
  color: rgb(0, 66, 170);
  margin-bottom: 8px;
}

.mobile-mode .space-char {
  display: inline-block;
  width: 0.5em;
  height: 1em;
  margin: 0 1px;
  position: relative;
}

.mobile-mode .space-char::after {
  content: "Â·";
  position: absolute;
  top: 60%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.7em;
  opacity: 0.6;
}

/* ===== GRIDS ===== */
.mobile-mode .char-grid {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: min-content;
  width: 100%;
  justify-content: center;
  overflow: visible;
}

.mobile-mode .char-grid.encrypted-line {
  margin-bottom: 8px;  /* Increased to prevent overlap */
  padding: 0 1px;
}

.mobile-mode .char-grid.display-line {
  margin: 5px 0 12px;  /* Adjusted to prevent overlap */
  padding: 0 1px;
}

.mobile-mode .grid-cell {
  width: 1ch;
  display: flex;
  justify-content: center;
  align-items: center;
}

.mobile-mode .grids {
  display: flex;
  justify-content: space-between;  /* Changed to space-between */
  gap: 6px;
  width: 100%;
  margin: 20px 0 6px;  /* Increased top margin to prevent overlap with text container */
  flex-wrap: nowrap;
  flex-grow: 1;
  overflow-x: auto;
  overflow-y: hidden;
  position: relative;  /* Added for positioning controls */
}

.mobile-mode .encrypted-grid {
  display: grid;
  grid-template-columns: repeat(5, 38px);
  gap: 6px;
  padding: 10px;
  border-radius: 8px;
  background-color: #fff;
  width: auto;
  font-size: 1.3em;
  margin-right: auto;  /* Push to the left */
}

.mobile-mode .guess-grid {
  display: grid;
  grid-template-columns: repeat(5, 38px);
  gap: 6px;
  padding: 10px;
  border-radius: 8px;
  background-color: #fff;
  width: auto;
  font-size: 1.3em;
  margin-left: auto;  /* Push to the right */
  margin-right: 25px;  /* Add space from the right edge */
  position: relative;
  right: 0;  /* Align to the right edge */
}

/* ===== CONTROLS ===== */
.mobile-mode .controls-container {
  display: flex;
  flex-direction: column; /* Stack buttons vertically */
  justify-content: center;
  width: auto;
  margin: 5px 0;
  background: #fff;
  flex-shrink: 0;
  position: absolute;  /* Position in the middle */
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0.8);  /* Make controls smaller */
  z-index: 5;  /* Ensure it's above other elements */
  gap: 8px; /* Add gap between buttons */
}

.mobile-mode .controls {
  padding: 5px 10px;  /* Smaller padding */
  gap: 8px;  /* Reduced gap */
  border-radius: 20px;
  display: flex; /* Maintain flex for alignment */
  flex-direction: column; /* Stack buttons vertically */
  justify-content: center;
  min-width: 150px;  /* Smaller minimum width */
}

.mobile-mode .controls p {
  margin: 0;
  padding: 5px 8px;
  font-size: 0.85rem;
  border-radius: 15px;
}

/* .mobile-mode .controls button {
  padding: 4px 10px;
  font-size: 0.85rem;
  color: #000;
} */

/* ===== THEMES ===== */
.mobile-mode.light-theme {
  color: #212529;
  background: #fff;
}

.mobile-mode.dark-theme {
  color: #f8f9fa;
  background: #222;
}

.mobile-mode.dark-theme .text-container,
.mobile-mode.dark-theme .controls-container,
.mobile-mode.dark-theme .controls,
.mobile-mode.dark-theme .controls p {
  color: #4cc9f0;
  background: #222;
}

.mobile-mode.dark-theme .retro-title {
  background: linear-gradient(135deg, #4cc9f0 25%, rgb(0, 249, 0) 100%);
  color: transparent;
  background-clip: text;
  -webkit-background-clip: text;
  text-shadow: 0 0 5px rgba(0, 225, 152, 0.75);
}

.mobile-mode.dark-theme .encrypted-line,
.mobile-mode.dark-theme .char-grid encrypted-line {
  background-color: #222;
}


/* .mobile-mode.dark-theme button { */
.mobile-mode.dark-theme .encrypted-line,
.mobile-mode.dark-theme .letter-cell {
  color: #4cc9f0;
  text-shadow: 0 0 5px rgba(76, 201, 240, 0.5);
}

.mobile-mode.dark-theme .settings-icon {
  color: #4cc9f0
}

.mobile-mode.dark-theme .settings-icon:hover {
  color: rgb(0, 225, 152)
}

.mobile-mode.dark-theme .display-line,
.mobile-mode.dark-theme .guess-grid .letter-cell {
  color: rgb(0, 225, 152) !important;
  text-shadow: 0 0 5px rgba(0, 225, 152, 0.5);
}

.mobile-mode.dark-theme .encrypted-grid,
.mobile-mode.dark-theme .guess-grid, 
.mobile-mode.dark-theme .hint-button{
  background-color: #222;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 480px) {
  .mobile-mode .retro-title {
    font-size: 1.25rem;
  }

  .mobile-mode .encrypted-line,
  .mobile-mode .display-line {
    font-size: 0.9rem;
    padding: 2px 1px;
  }

  .mobile-mode .text-container {
    padding: 8px;
  }

  .mobile-mode .letter-cell {
    width: 36px;
    height: 36px;
    font-size: 2em;
  }
}

@media (max-width: 360px) {

  .mobile-mode .encrypted-line,
  .mobile-mode .display-line {
    font-size: 0.8rem;
  }

  .mobile-mode .text-container {
    padding: 6px;
  }

  .mobile-mode .space-char {
    width: 0.35em;
    margin: 0;
  }
}

@media (orientation: landscape) {
  .mobile-mode .game-content {
    height: 98vh;
  }

  .mobile-mode .text-container {
    max-height: 30vh;
    width: 98%;
    margin-bottom: 20px;  /* Added space below text container */
  }

  .mobile-mode .alternating-text {
    white-space: normal;
    word-break: break-word;
  }

  /* Adjust layout for landscape mode */
  .mobile-mode .grids {
    justify-content: space-between;
    margin-top: 25px;  /* More space from text container */
  }

  .mobile-mode .encrypted-grid {
    margin-right: 20%;  /* More space for the controls in the middle */
  }

  .mobile-mode .guess-grid {
    margin-left: 20%;  /* Move further right */
  }

  .mobile-mode .controls-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);  /* Make controls smaller */
    background: rgba(255, 255, 255, 0.85);  /* Semi-transparent background */
    padding: 4px 8px;  /* Smaller padding */
    border-radius: 20px;
  }

  /* Ensure text doesn't overlap with grids */
  .mobile-mode .char-grid.encrypted-line,
  .mobile-mode .char-grid.display-line {
    margin: 10px 0;
  }
}

/* Add these styles to your Mobile.css file */

/* New container for the three-column layout in landscape */
.mobile-mode .mobile-gameplay-container {
  display: flex;
  justify-content: space-between; /* Distribute space evenly */
  align-items: center;
  width: 100%;
  padding: 0;
  margin-bottom: 10px;
  flex-grow: 1;
  position: relative;
  gap: 0; /* Remove gap to control spacing with padding instead */
  padding: 0 8px; /* Increased horizontal padding */
}

/* Adjust grid containers to have consistent width */
.mobile-mode .encrypted-grid-container{
  flex: 1 1 auto; /* Take available space */
  max-width: calc(50% - 20px); /* Increased width */
  display: flex;
  justify-content: flex-end; /* Push content to right edge (toward center) */
  padding-right: 8px; /* Increased padding for more space */
  order: 1; /* First in flex layout */
}
.mobile-mode .guess-grid-container {
  flex: 1 1 auto; /* Take available space */
  max-width: calc(50% - 20px); /* Increased width */
  display: flex;
  justify-content: flex-start; /* Push content to left edge (toward center) */
  padding-left: 8px; /* Increased padding for more space */
  order: 3; /* Last in flex layout */
}

/* Update the controls container to work in the new layout */
.mobile-mode .controls-container-fixed {
  flex: 0 0 auto; /* Make controls column much narrower */
  max-width: 80px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 5;
  padding: 2px;
  text-align: center;
  margin: 0 auto; /* Center horizontally */
  order: 2;
}

/* Keep controls vertical in landscape mode */
.mobile-mode .controls {
  min-width: 70px;
  max-width: 80px;
  transform: scale(0.8); /* Increased size */
  padding: 4px;
  margin: 0 auto; /* Ensure horizontal centering */
  display: flex;
  flex-direction: column;
  align-items: center; /* Center content horizontally */
  justify-content: center; /* Center content vertically */
  gap: 6px; /* More space between elements */
}

/* Make controls more compact */
.mobile-mode .controls p {
  font-size: 0.65rem;
  padding: 2px 4px;
  margin: 0;
  white-space: nowrap;
}

.mobile-mode .controls button {
  padding: 4px;
  font-size: 0.65rem;
  white-space: nowrap;
}
.mobile-mode .encrypted-grid,
.mobile-mode .guess-grid {
  display: grid;
  grid-template-columns: repeat(5, 26px); /* Slightly smaller */
  gap: 3px;
  padding: 5px;
  overflow-x: visible; /* Prevent scrollbars */
  max-width: 100%;
  justify-content: center; /* Ensure centered layout */
}

/* Remove the old absolute positioning */
.mobile-mode .controls-container {
  position: static; /* Override the absolute positioning */
  transform: none;
  left: auto;
  top: auto;
}

/* Dark theme adjustments */
/* .mobile-mode.dark-theme .controls {
  background: rgba(51, 51, 51, 0.85);
} */

/* Responsive adjustments */
@media (max-width: 600px) {
  .mobile-mode .encrypted-grid-container,
  .mobile-mode .guess-grid-container {
    flex: 0 0 43%;
    max-width: 43%;
  }

  .mobile-mode .controls-container-fixed {
    flex: 0 0 14%; /* Make controls column much narrower */
    max-width: 14%;
  }

  .mobile-mode .controls {
    min-width: 110px;
    padding: 4px 8px;
  }
}

@media (max-width: 480px) {
  .mobile-mode .encrypted-grid-container,
  .mobile-mode .guess-grid-container {
    flex: 0 0 43%;
    max-width: 43%;
  }

  .mobile-mode .controls-container-fixed {
    flex: 0 0 14%; /* Make controls column much narrower */
    max-width: 14%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .mobile-mode .controls {
    min-width: 70px; /* Slightly wider */
    transform: scale(0.75); /* Larger scale */
    margin: 0 auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .mobile-mode .controls p {
    font-size: 0.95rem; /* Larger font */
    padding: 4px 8px;
    text-align: center;
    width: 100%;
    margin-bottom: 5px;
  }

  .mobile-mode .controls button {
    padding: 8px 12px;
    font-size: 0.95rem; /* Larger font */
    text-align: center;
    width: 100%;
  }
}

/* Handle iPad and larger tablets */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  .mobile-mode .encrypted-grid-container,
  .mobile-mode .guess-grid-container {
    flex: 0 0 43%;
    max-width: 43%;
  }

  .mobile-mode .controls-container-fixed {
    flex: 0 0 14%; /* Make controls column much narrower */
    max-width: 14%;
  }

  .mobile-mode .controls {
    min-width: 140px;
    transform: scale(1); /* Reset any scaling */
  }
}

/* Mobile-friendly win celebration styles */

/* Base adjustments for all mobile devices */
@media (max-width: 768px) {
  .win-celebration {
    align-items: center;
    justify-content: center;
    padding: 10px;
  }

  .celebration-content {
    max-width: 90%;
    width: auto;
    max-height: 80vh;
    overflow-y: auto;
    padding: 20px 15px;
    display: flex;
    flex-direction: column;
  }

  .victory-title {
    font-size: 1.8rem;
    margin-bottom: 10px;
  }

  .victory-message {
    margin-bottom: 15px;
  }

  .quote-container {
    margin-top: 15px;
    padding: 12px;
    max-height: 120px;
  }

  .decrypted-quote {
    font-size: 0.9rem;
    line-height: 1.4;
    margin-bottom: 10px;
  }

  .stats-container {
    margin: 12px 0 !important;
    gap: 15px !important;
  }

  .stat-item {
    min-width: 70px;
  }

  .stat-value {
    font-size: 1.5rem;
  }

  .stat-item.score .stat-value {
    font-size: 1.8rem;
  }

  .celebration-actions {
    margin-top: 15px;
  }

  .play-again-button {
    padding: 10px 20px;
    font-size: 1rem;
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  .celebration-content {
    padding: 15px 12px;
    max-height: 85vh;
  }

  .victory-title {
    font-size: 1.5rem;
    margin-bottom: 8px;
  }

  .quote-container {
    max-height: 100px;
    padding: 10px;
    margin-top: 12px;
  }

  .decrypted-quote {
    font-size: 0.85rem;
    line-height: 1.3;
  }

  .quote-attribution {
    font-size: 0.8rem;
  }

  .stats-container {
    flex-wrap: wrap !important;
    gap: 10px !important;
  }

  .stat-item {
    min-width: 60px;
  }

  .stat-label {
    font-size: 0.75rem;
  }

  .stat-value {
    font-size: 1.3rem;
  }

  .stat-item.score .stat-value {
    font-size: 1.5rem;
  }

  .play-again-button {
    padding: 8px 16px;
    font-size: 0.9rem;
  }
}

/* Extra small devices */
@media (max-width: 360px) {
  .celebration-content {
    padding: 12px 10px;
    max-height: 90vh;
  }

  .victory-title {
    font-size: 1.3rem;
  }

  .quote-container {
    max-height: 80px;
    padding: 8px;
  }

  .decrypted-quote {
    font-size: 0.8rem;
    line-height: 1.2;
    margin-bottom: 8px;
  }

  .stat-item {
    min-width: 50px;
  }

  .stat-value {
    font-size: 1.1rem;
  }

  .stat-item.score .stat-value {
    font-size: 1.3rem;
  }
}

/* Specific adjustment for landscape orientation on small screens */
@media (max-height: 500px) and (orientation: landscape) {
  .celebration-content {
    max-height: 90vh;
    padding: 12px;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }

  .victory-message {
    flex: 1 1 100%;
    margin-bottom: 5px;
  }

  .quote-container {
    flex: 1 1 45%;
    max-height: 100px;
    margin-top: 0;
  }

  .stats-container {
    flex: 1 1 45%;
    margin: 0 !important;
  }

  .celebration-actions {
    flex: 1 1 100%;
    margin-top: 10px;
  }

  .victory-title {
    font-size: 1.4rem;
    margin-bottom: 5px;
  }
}

/* Ensure scrollability for very small screens */
@media (max-height: 400px) {
  .celebration-content {
    overflow-y: auto;
    max-height: 95vh;
  }

  /* Adjust matrix rain to be less intrusive on very small screens */
  .matrix-canvas {
    opacity: 0.6;
  }
}

/* ===== OLDER PHONE OPTIMIZATION ===== */
/* Galaxy S9+, iPhone SE, and other narrower phones */

/* Galaxy S9+ is approximately 412 Ã 846px */
/* iPhone SE is approximately 320 Ã 568px (1st gen) or 375 Ã 667px (2020) */

/* General fixes for narrower phones */
@media (max-width: 420px) {
  /* Make text container smaller to give more room for grids */
  .mobile-mode .text-container {
    max-height: 25vh;
    margin: 2px auto;
    padding: 5px 8px;
  }

  /* Reduce overall padding */
  .mobile-mode .App-container,
  .mobile-mode .game-content {
    padding: 5px;
  }

  /* Adjust the mobile gameplay container for more efficient space usage */
  .mobile-mode .mobile-gameplay-container {
    gap: 1px;
    padding: 0;
    margin-top: 1px;
    width: 100%; /* Ensure full width */
    justify-content: space-between; /* Space elements evenly */
  }

  /* Make grids smaller and font size smaller */
  .mobile-mode .encrypted-grid-container,
  .mobile-mode .guess-grid-container {
    flex: 0 0 41%; /* Smaller width */
    max-width: 41%;
  }

  .mobile-mode .controls-container-fixed {
    flex: 0 0 14%; /* Make controls column much narrower */
    max-width: 14%;
  }

  /* Make letter cells smaller */
  .mobile-mode .letter-cell {
    width: 32px;
    height: 32px;
    font-size: 0.95em;
  }

  /* Ensure encrypted/display line text is small enough */
  .mobile-mode .char-grid.encrypted-line,
  .mobile-mode .char-grid.display-line {
    font-size: 0.85rem;
  }

  /* Frequency indicators smaller */
  .mobile-mode .frequency-indicator {
    font-size: 0.4em;
    bottom: 1px;
    right: 1px;
  }

  /* Optimize the controls even further for small screens */
  .mobile-mode .controls {
    min-width: 55px;
    max-width: 115px;
    transform: scale(0.65);
    padding: 3px 6px;
  }

  .mobile-mode .controls p {
    padding: 2px 4px;
    font-size: 0.75rem;
  }

  .mobile-mode .controls button {
    padding: 5px 8px;
    font-size: 0.75rem;
  }
}

/* iPhone SE (1st gen) and other very narrow phones */
@media (max-width: 330px) {
  /* Further reduce sizes for extremely narrow screens */
  .mobile-mode .letter-cell {
    width: 28px;
    height: 28px;
    font-size: 0.9em;
  }

  /* Make grids even smaller */
  .mobile-mode .encrypted-grid-container,
  .mobile-mode .guess-grid-container {
    flex: 0 0 41%;
    max-width: 41%;
  }

  .mobile-mode .controls-container-fixed {
    flex: 0 0 14%; /* Make controls column much narrower */
    max-width: 14%;
  }

  /* Even smaller controls */
  .mobile-mode .controls {
    min-width: 55px;
    max-width: 100px;
    transform: scale(0.65);
    padding: 2px 4px;
  }

  /* Reduce header size */
  .mobile-mode .retro-title {
    font-size: 1.2rem;
    margin: 0;
  }

  /* Make sure the grid adjusts to screen */
  .mobile-mode .encrypted-grid,
  .mobile-mode .guess-grid {
    grid-template-columns: repeat(5, 28px);
    gap: 4px;
    padding: 6px;
  }

  /* Smaller text */
  .mobile-mode .char-grid.encrypted-line,
  .mobile-mode .char-grid.display-line {
    font-size: 0.8rem;
  }
}

/* Galaxy S9+ specific height issues - ensure grid doesn't overlap with text */
@media (min-width: 400px) and (max-width: 420px) and (min-height: 800px) and (max-height: 850px) {
  .mobile-mode .text-container {
    max-height: 22vh; /* Slightly smaller for this specific height range */
  }

  .mobile-mode .mobile-gameplay-container {
    margin-top: 8px;
    gap:1px;
  }
}

/* Landscape mode for older narrow phones - this is where most issues occur */
@media (max-height: 420px) and (orientation: landscape) {
  /* Significantly reduce text container height */
  .mobile-mode .text-container {
    max-height: 22vh;
    margin-bottom: 2px;
  }

  /* Adjust layout to be more horizontal */
  .mobile-mode .mobile-gameplay-container {
    align-items: flex-start; /* Align to top */
    margin-top: 0;
    height: 65vh; /* Control the height explicitly */
    gap: 1px;
  }

  /* Adjust grid containers to take less vertical space */
  .mobile-mode .encrypted-grid-container,
  .mobile-mode .guess-grid-container {
    align-items: flex-start;
    flex: 0 0 43%; /* Give more space to grids */
    max-width: 43%;
  }

  /* Make letter cells smaller in landscape */
  .mobile-mode .letter-cell {
    width: 30px;
    height: 30px;
    font-size: 0.9em;
  }

  /* Ensure controls are visible */
  .mobile-mode .controls-container-fixed {
    align-self: center; /* Center vertically */
    flex: 0 0 14%; /* Make controls column much narrower */
    max-width: 14%;
  }

  /* Force horizontal scrolling for grids if needed */
  .mobile-mode .encrypted-grid,
  .mobile-mode .guess-grid {
    overflow-x: auto;
    max-width: 100%;
    padding: 5px;
  }

  /* Ensure text doesn't overflow */
  .mobile-mode .char-grid.encrypted-line,
  .mobile-mode .char-grid.display-line {
    font-size: 0.8rem;
  }

  /* Bottom elements need less space */
  .mobile-mode .bottom-container {
    margin-top: 2px;
  }
}

/* Make sure horizontal scrolling is smooth */
.mobile-mode .encrypted-grid,
.mobile-mode .guess-grid {
  -webkit-overflow-scrolling: touch;
}

/* Hide scrollbars completely */
.mobile-mode .encrypted-grid::-webkit-scrollbar,
.mobile-mode .guess-grid::-webkit-scrollbar {
  display: none;
}

.mobile-mode .encrypted-grid,
.mobile-mode .guess-grid {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}