/* 
   Mobile.css - Dedicated styles for mobile devices 
   Streamlined and organized for better maintainability
    1. BASIC CONTAINER STYLES - Core layout containers
    2. HEADER ELEMENTS - Title and header styling
    3. TEXT CONTAINER STYLES - Text display areas
    4. ALTERNATING TEXT STYLES - Encrypted and display line formatting
    5. SPACE CHARACTER STYLING - Space block appearance
    6. GRID LAYOUTS - Letter selection grids
    7. CONTROLS - Game control buttons and indicators
    8. KEYBOARD HINT - Keyboard usage messages
    9. GAME MESSAGE - Win/lose messages
    10. WIN CELEBRATION STYLES - Victory screen
    11. THEME COLOR STYLES - Visual theme variations
    12. ORIENTATION WARNING - Portrait mode warning
    13. RESPONSIVE ADJUSTMENTS - Screen size adaptations
*/


/* ===== BASIC CONTAINER STYLES ===== */
.mobile-mode {
  margin: 0 !important;
  padding: 10px !important;
  max-width: 100% !important;
  border-radius: 0 !important;
  height: 100vh;
  box-sizing: border-box;
}

.mobile-mode .game-content {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 20px);
  justify-content: flex-start;
  gap: 2px;
}

/* ===== HEADER ELEMENTS ===== */
.mobile-mode .game-title {
  font-size: 1.5rem;
  margin-bottom: 0;
}

.mobile-mode .game-header {

  /* ===== GRID-BASED CHARACTER STYLES ===== */
  .mobile-mode .char-grid {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: min-content;
    width: 100%;
    font-family: 'Courier New', monospace !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: "tnum" !important;
    justify-content: center !important;
    overflow-x: visible !important;
    /* Prevent horizontal scrollbar */
    overflow-y: visible !important;
    /* Prevent vertical scrollbar */
  }

  .mobile-mode .char-grid.encrypted-line {
    margin-bottom: -6px !important;
    padding: 0 1px 0 !important;
    font-weight: 600 !important;
    line-height: 1.2 !important;
    /* Tighter line height */
  }

  .mobile-mode .char-grid.display-line {
    margin-bottom: 2px !important;
    margin-top: -10px !important;
    /* Reduced from 2px */
    padding: 0 1px 0 !important;
    font-weight: bold !important;
    line-height: 1.2 !important;
    /* Tighter line height */
  }

  .mobile-mode .grid-cell {
    width: 1ch;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    box-sizing: border-box;
  }

  .mobile-mode .space-cell {
    position: relative;
  }

  .mobile-mode .space-dot {
    position: absolute;
    font-size: 0.7em;
    opacity: 0.6;
    color: currentColor;
  }

  /* Ensure display cells are properly aligned */
  .mobile-mode .char-grid.encrypted-line .grid-cell,
  .mobile-mode .char-grid.display-line .grid-cell {
    min-width: 1ch;
    max-width: 1ch;
    overflow: visible;
    position: relative;
  }

  @media (max-width: 360px) {

    .mobile-mode .char-grid.encrypted-line .grid-cell,
    .mobile-mode .char-grid.display-line .grid-cell {
      min-width: 0.9ch;
      max-width: 0.9ch;
    }
  }

  margin-bottom: 2px;
}

/* ===== TEXT CONTAINER STYLES ===== */
.mobile-mode .text-container {
  margin: 3px auto !important;
  padding: 6px 12px !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1) !important;
  max-height: 35vh !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  width: 100% !important;
  box-sizing: border-box !important;
  background-color: rgba(248, 249, 250, 0.95) !important;
  position: relative !important;
}

/* Dark theme for text container */
.mobile-mode.dark-theme .text-container {
  background-color: #222 !important;
  box-shadow: none !important;
}

/* ===== ALTERNATING TEXT STYLES ===== */
.mobile-mode .alternating-text {
  font-family: 'Courier New', monospace;
  line-height: 1.4;
  font-size: 0.9rem;
  white-space: pre-wrap;
  word-break: normal;
  word-spacing: normal;
  letter-spacing: normal;
  overflow-wrap: break-word;
  padding: 0 5px !important;
  text-align: left !important;
}

/* Encrypted line styles */
.mobile-mode .encrypted-line {
  white-space: pre-wrap !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  font-family: 'Courier New', monospace !important;
  font-variant-numeric: tabular-nums !important;
  font-feature-settings: "tnum" !important;
  line-height: 1.5 !important;
  padding: 4px 2px !important;
  font-weight: 600 !important;
  text-align: left !important;
  letter-spacing: 0 !important;
}

/* Display line styles */
.mobile-mode .display-line {
  white-space: pre-wrap !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  font-family: 'Courier New', monospace !important;
  font-variant-numeric: tabular-nums !important;
  font-feature-settings: "tnum" !important;
  line-height: 1.5 !important;
  padding: 2px 2px 6px !important;
  margin-bottom: 8px !important;
  font-weight: bold !important;
  text-align: left !important;
  letter-spacing: 0 !important;
}

/* Ensure placeholder square has consistent width on mobile */
.mobile-mode .display-line .placeholder {
  display: inline-block !important;
  width: 1ch !important;
  /* Force consistent character width */
  text-align: center !important;
}

/* ===== SPACE CHARACTER STYLING ===== */
/* Simplified space character for mobile devices */
.mobile-mode .space-char-mobile {
  display: inline-block;
  width: 0.4em;
  color: rgba(128, 128, 128, 0.6);
  margin: 0 1px;
  font-weight: normal;
  user-select: none;
}

/* Original space character styling (used on desktop) */
.mobile-mode .space-char {
  display: inline-block !important;
  width: 0.5em !important;
  background-color: rgba(128, 128, 128, 0.2) !important;
  height: 1em !important;
  vertical-align: middle !important;
  border-radius: 2px !important;
  margin: 0 1px !important;
  position: relative !important;
}

/* Central dot in spaces */
.mobile-mode .space-char::after {
  content: "Â·" !important;
  position: absolute !important;
  top: 60% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-size: 0.7em !important;
  opacity: 0.6 !important;
  color: currentColor !important;
}

/* Tiny screen spaces */
.mobile-mode .space-char.tiny-screen {
  width: 0.3em !important;
  margin: 0 !important;
}

.mobile-mode .space-char.tiny-screen::after {
  font-size: 0.5em !important;
  opacity: 0.5 !important;
}

/* ===== GRID LAYOUTS ===== */
.mobile-mode .grids {
  display: flex;
  justify-content: space-between;
  width: 100%;
  padding: 0;
  margin: 6px 0;
  position: relative;
  min-height: 200px;
}

.mobile-mode .encrypted-grid {
  margin-right: 0;
  margin-left: 8px;
  position: relative;
  left: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  border-radius: 10px;
  z-index: 10;
  padding: 10px;
}

.mobile-mode.dark-theme .encrypted-grid,
.mobile-mode.dark-theme .guess-grid {
  box-shadow: none !important;
}

.mobile-mode.text-scifi-blue .encrypted-grid,
.mobile-mode.text-scifi-blue .guess-grid {
  background-color: rgba(76, 201, 240, 0.1) !important;
  box-shadow: 0 2px 8px rgba(76, 201, 240, 0.2) !important;
}

.mobile-mode.text-retro-green .encrypted-grid,
.mobile-mode.text-retro-green .guess-grid {
  background-color: rgba(0, 255, 65, 0.1) !important;
  box-shadow: 0 2px 8px rgba(0, 255, 65, 0.2) !important;
}

.mobile-mode .guess-grid {
  margin-left: 0;
  margin-right: 5px;
  position: relative;
  right: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  border-radius: 10px;
  z-index: 10;
}

.mobile-mode.dark-theme .encrypted-grid,
.mobile-mode.dark-theme .guess-grid {
  background-color: #222 !important;
}

.mobile-mode .letter-cell {
  width: 45px;
  height: 45px;
  font-size: 1.4em;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.mobile-mode .letter-cell.selected {
  transform: scale(1.1);
  box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.5);
}

/* ===== CONTROLS ===== */
.mobile-mode .controls-container {
  display: flex;
  justify-content: center;
  width: 100%;
  margin: 5px 0 10px 0;
}

.mobile-mode .controls {
  padding: 8px 15px;
  gap: 10px;
  margin: 2px 0 5px;
  background-color: rgba(248, 249, 250, 0.95);
  border-radius: 20px;
  width: auto;
  min-width: 200px;
  display: inline-flex;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.mobile-mode .controls p {
  margin: 0;
  padding: 5px 8px;
  font-size: 0.9rem;
  border-radius: 15px;
  background-color: rgba(255, 255, 255, 0.8);
}

.mobile-mode .controls button {
  padding: 5px 12px;
  font-size: 0.9rem;
}

/* Dark theme control adjustments */
.mobile-mode.dark-theme .controls {
  background-color: #222;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.mobile-mode.dark-theme .controls p {
  background-color: #333;
}

/* ===== KEYBOARD HINT ===== */
.mobile-mode .keyboard-hint {
  font-size: 0.7rem;
  padding: 3px;
  margin: 3px 0;
}

/* ===== GAME MESSAGE ===== */
.mobile-mode .game-message {
  margin: 10px auto;
  padding: 10px;
  max-width: 90%;
}

/* ===== WIN CELEBRATION STYLES ===== */
.mobile-mode .win-celebration .celebration-content {
  max-width: 90%;
  width: 90%;
  padding: 15px;
  margin: 0;
  max-height: 80vh;
  overflow-y: auto;
  box-sizing: border-box;
  background-color: rgba(51, 51, 51, 0.85) !important;
  /* Translucent background */
  backdrop-filter: blur(3px);
  /* Optional blur effect */
}

.mobile-mode .win-celebration .victory-title {
  font-size: 1.5rem;
  margin-bottom: 5px;
}

.mobile-mode .win-celebration .quote-container {
  margin-top: 10px;
  padding: 10px;
  max-height: 100px;
  background-color: rgba(0, 0, 0, 0.2);
  /* More translucent */
}

.mobile-mode .win-celebration .decrypted-quote {
  font-size: 0.9rem;
  line-height: 1.3;
  margin-bottom: 10px;
}

.mobile-mode .win-celebration .stats-container {
  gap: 8px !important;
  margin: 10px 0 !important;
}

.mobile-mode .win-celebration .stat-item {
  min-width: 60px;
  padding: 5px;
}

.mobile-mode .win-celebration .stat-value {
  font-size: 1.5rem;
}

.mobile-mode .win-celebration .stat-item.score .stat-value {
  font-size: 1.8rem;
}

.mobile-mode .win-celebration .play-again-button {
  padding: 10px 20px;
  font-size: 1rem;
  width: 100%;
  max-width: 200px;
  margin: 0 auto;
}

/* ===== THEME COLOR STYLES ===== */
/* Initial theme defaults */
.mobile-mode {
  color: #212529;
  background-color: #ffffff;
}

/* Explicit rules for light theme with higher specificity - Samsung Browser support */
.mobile-mode.light-theme,
html .mobile-mode.light-theme,
body .mobile-mode.light-theme,
.mobile-mode[class*="light-theme"],
html[data-theme="light"] .mobile-mode {
  color: #212529 !important;
  background-color: #ffffff !important;
  -webkit-text-fill-color: #212529 !important;
  -webkit-background-color: #ffffff !important;
}

/* Force text container background in light mode */
.mobile-mode.light-theme .text-container,
html .mobile-mode.light-theme .text-container,
body .mobile-mode.light-theme .text-container,
.mobile-mode[class*="light-theme"] .text-container {
  background-color: rgba(248, 249, 250, 0.95) !important;
  -webkit-background-color: rgba(248, 249, 250, 0.95) !important;
}

/* Stronger specificity for dark theme to prevent overrides */
.mobile-mode.dark-theme,
html .mobile-mode.dark-theme,
body .mobile-mode.dark-theme,
.mobile-mode[class*="dark-theme"],
.mobile-mode[class*="theme-mode-dark"],
html[data-theme="dark"] .mobile-mode {
  color: #f8f9fa !important;
  background-color: #222 !important;
  -webkit-text-fill-color: #f8f9fa !important;
  -webkit-background-color: #222 !important;
}

/* Dark theme text container */
.mobile-mode.dark-theme .text-container,
html .mobile-mode.dark-theme .text-container,
body .mobile-mode.dark-theme .text-container,
.mobile-mode[class*="dark-theme"] .text-container {
  background-color: #222 !important;
  -webkit-background-color: #222 !important;
}

/* Text color themes for mobile */
/* Sci-fi blue theme */
.mobile-mode.text-scifi-blue .game-title,
.mobile-mode.text-scifi-blue .encrypted-line,
.mobile-mode.text-scifi-blue .display-line,
.mobile-mode.text-scifi-blue .letter-cell,
.mobile-mode.text-scifi-blue button,
.mobile-mode.text-scifi-blue .controls p {
  color: #4cc9f0 !important;
  text-shadow: 0 0 5px rgba(76, 201, 240, 0.5) !important;
}

.mobile-mode.text-scifi-blue .game-title {
  color: #4cc9f0 !important;
  text-shadow: 0 0 8px rgba(76, 201, 240, 0.5) !important;
}

/* Retro green theme */
.mobile-mode.text-retro-green .game-title,
.mobile-mode.text-retro-green .encrypted-line,
.mobile-mode.text-retro-green .display-line,
.mobile-mode.text-retro-green .letter-cell,
.mobile-mode.text-retro-green button,
.mobile-mode.text-retro-green .controls p {
  color: #00ff41 !important;
  text-shadow: 0 0 5px rgba(0, 255, 65, 0.5) !important;
}

.mobile-mode.text-retro-green .game-title {
  color: #00ff41 !important;
  text-shadow: 0 0 8px rgba(0, 255, 65, 0.5) !important;
}

/* Selected state for themes */
.mobile-mode.text-scifi-blue .letter-cell.selected {
  color: white !important;
  text-shadow: 0 0 8px rgba(76, 201, 240, 0.8) !important;
  box-shadow: 0 0 0 4px rgba(76, 201, 240, 0.5) !important;
}

.mobile-mode.text-retro-green .letter-cell.selected {
  color: white !important;
  text-shadow: 0 0 8px rgba(0, 255, 65, 0.8) !important;
  box-shadow: 0 0 0 4px rgba(0, 255, 65, 0.5) !important;
}

/* Guessed state for themes */
.mobile-mode.text-scifi-blue .letter-cell.guessed {
  color: rgba(76, 201, 240, 0.5) !important;
}

.mobile-mode.text-retro-green .letter-cell.guessed {
  color: rgba(0, 255, 65, 0.5) !important;
}

/* Space colors for themes */
.mobile-mode.text-scifi-blue .space-char-mobile {
  color: rgba(76, 201, 240, 0.7) !important;
}

.mobile-mode.text-retro-green .space-char-mobile {
  color: rgba(0, 255, 65, 0.7) !important;
}

/* ===== ORIENTATION WARNING ===== */
.mobile-orientation-warning {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 1000;
  justify-content: center;
  align-items: center;
  color: white;
  text-align: center;
  padding: 20px;
}

.mobile-mode.portrait .mobile-orientation-warning {
  display: flex;
}

.orientation-message {
  background-color: #333;
  padding: 20px;
  border-radius: 10px;
  max-width: 80%;
}

.orientation-dismiss {
  margin-top: 20px;
  padding: 10px 20px;
  background-color: #007bff;
  border: none;
  border-radius: 5px;
  color: white;
  font-weight: bold;
}

/* ===== RESPONSIVE ADJUSTMENTS ===== */
/* For wider screens, ensure grids stay at edges */
@media (min-width: 600px) {
  .mobile-mode .encrypted-grid {
    position: absolute;
    left: 10px;
  }

  .mobile-mode .guess-grid {
    position: absolute;
    right: 10px;
  }

  /* Ensure light theme works on mid-sized devices */
  .mobile-mode.light-theme {
    color: #212529 !important;
    background-color: #ffffff !important;
  }

  .mobile-mode.light-theme .text-container {
    background-color: rgba(248, 249, 250, 0.95) !important;
  }
}

/* Screen-size specific adjustments for text */
@media (max-width: 480px) {

  /* Force theme enforcement on small screens - with Samsung Browser support */
  .mobile-mode.light-theme,
  html .mobile-mode.light-theme,
  body .mobile-mode.light-theme,
  .mobile-mode[class*="light-theme"],
  .mobile-mode[class*="theme-mode-light"],
  html[data-theme="light"] .mobile-mode {
    color: #212529 !important;
    background-color: #ffffff !important;
    -webkit-text-fill-color: #212529 !important;
  }

  /* Light theme text container - stronger specificity */
  .mobile-mode.light-theme .text-container,
  html .mobile-mode.light-theme .text-container,
  .mobile-mode[class*="light-theme"] .text-container {
    background-color: rgba(248, 249, 250, 0.95) !important;
  }

  .mobile-mode.dark-theme,
  html .mobile-mode.dark-theme,
  body .mobile-mode.dark-theme,
  .mobile-mode[class*="dark-theme"],
  .mobile-mode[class*="theme-mode-dark"],
  html[data-theme="dark"] .mobile-mode {
    color: #f8f9fa !important;
    background-color: #222 !important;
    -webkit-text-fill-color: #f8f9fa !important;
  }

  .mobile-mode .encrypted-line,
  .mobile-mode .display-line {
    font-size: 0.9rem !important;
    letter-spacing: -0.01em !important;
    /* Slightly tighten letter spacing */
  }

  .mobile-mode .alternating-text {
    font-size: 0.85rem;
  }

  .mobile-mode .text-container {
    max-width: 100% !important;
    padding: 8px !important;
  }

  /* Reduce padding on lines to save space */
  .mobile-mode .encrypted-line {
    padding: 2px 1px !important;
  }

  .mobile-mode .display-line {
    padding: 2px 1px 4px !important;
    margin-bottom: 4px !important;
  }

  .mobile-mode .space-char {
    width: 0.4em !important;
    /* Even narrower for phone-sized screens */
    margin: 0 1px !important;
  }

  .mobile-mode .space-char::after {
    font-size: 0.6em !important;
    /* Smaller dot for smaller screens */
  }
}

/* For very small screens */
@media (max-width: 360px) {

  .mobile-mode .encrypted-line,
  .mobile-mode .display-line {
    font-size: 0.8rem !important;
    letter-spacing: -0.02em !important;
    /* More tightly spaced for very small screens */
  }

  .mobile-mode .alternating-text {
    font-size: 0.8rem;
  }

  .mobile-mode .text-container {
    padding: 6px !important;
  }

  .mobile-mode .space-char {
    width: 0.35em !important;
    /* Minimum width for very small screens */
    margin: 0 !important;
    /* No extra margin */
  }

  .mobile-mode .letter-cell {
    width: 36px;
    height: 36px;
    font-size: 1.1em;
  }
}

/* Landscape-specific adjustments */
@media (orientation: landscape) {
  .mobile-mode .game-content {
    height: 98vh;
    justify-content: flex-start;
  }

  .mobile-mode .text-container {
    max-height: 30vh !important;
    width: 98% !important;
    max-width: 98% !important;
  }

  .mobile-mode .alternating-text {
    font-size: 0.85rem !important;
    white-space: normal !important;
    /* Allow text to flow */
    word-break: break-word !important;
    width: 100% !important;
  }

  .mobile-mode .display-line {
    margin-bottom: 6px !important;
  }

  /* Layout adjustments for landscape */
  .mobile-mode .game-title {
    font-size: 1.2rem;
    margin-bottom: 5px;
  }
}

/* Extra small devices (like iPhone SE in landscape) */
@media (max-height: 375px) and (orientation: landscape) {
  .mobile-mode .letter-cell {
    width: 32px;
    height: 32px;
    font-size: 0.9em;
  }

  .mobile-mode .encrypted,
  .mobile-mode .display {
    padding: 5px;
    font-size: 0.8rem;
    line-height: 1.4;
  }

  /* Compress controls */
  .mobile-mode .controls p {
    font-size: 0.8rem;
    padding: 4px 8px;
  }

  .mobile-mode .controls button {
    padding: 3px 8px;
    font-size: 0.75rem;
    min-height: 26px;
  }
}